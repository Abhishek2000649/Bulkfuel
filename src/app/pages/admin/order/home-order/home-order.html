<!-- <h2>All Orders</h2>
<hr />

<div
  class="order-card"
  *ngFor="let order of orders; trackBy: trackById"
>
  <p><b>Order ID:</b> {{ order.id }}</p>
  <p><b>User:</b> {{ order.user?.name }} ({{ order.user?.email }})</p>
  <p><b>Date:</b> {{ order.created_at | date:'dd MMM yyyy' }}</p>
  <p><b>Time:</b> {{ order.created_at | date:'hh:mm a' }}</p>
  <p><b>Total:</b> ₹{{ order.total_amount }}</p>

  <p><b>Status:</b>{{order.status}}</p>

  <select [(ngModel)]="order.status">
    <option *ngFor="let s of statuses" [value]="s">
      {{ s }}
    </option>
  </select>

  <button (click)="updateStatus(order.id, order.status)">
    Update Status
  </button>

  <p>
    <b>Address:</b>
    {{ order.address }},
    {{ order.city }},
    {{ order.state }} -
    {{ order.pincode }}
  </p>

  <h4>Order Items</h4>

  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Subtotal</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let item of order.items">
        <td>{{ item.product?.name || 'Deleted Product' }}</td>
        <td>₹{{ item.price }}</td>
        <td>{{ item.quantity }}</td>
        <td>₹{{ item.price * item.quantity }}</td>
      </tr>
    </tbody>
  </table>
</div> -->



<div class="bg-[#FAFAFA] min-h-screen p-4 md:p-8 font-['Inter']">
  <div class="max-w-[1400px] mx-auto">

    <!-- Header -->
    <div class="flex items-center justify-between mb-8 border-b border-gray-200 pb-4">
      <div>
        <h1 class="text-2xl font-black text-gray-900 tracking-tight uppercase">
          Logistics Command
        </h1>
        <p class="text-xs font-bold text-gray-400 mt-1 uppercase tracking-widest">
          Active Orders (Below Shipped)
        </p>
      </div>
    </div>

    <!-- Orders Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

      <!-- Orders -->
      <ng-container *ngIf="hasVisibleOrders(); else noOrders">

        <ng-container *ngFor="let order of orders; trackBy: trackById">

          <div
            *ngIf="shouldShowOrder(order)"
            class="bg-white border border-gray-200 rounded-2xl shadow-sm flex flex-col overflow-hidden"
          >

            <!-- Top -->
            <div class="px-5 py-3 bg-[#1a0303] flex justify-between items-center">
              <span class="text-[10px] font-black text-[#8B0000] uppercase tracking-[0.2em] bg-white px-2 py-0.5 rounded">
                {{ order.id }}
              </span>
              <span class="text-[10px] font-bold text-gray-400 uppercase">
                {{ order.created_at | date:'dd MMM yyyy' }}
                {{ order.created_at | date:'hh:mm a' }}
              </span>
            </div>

            <!-- Body -->
            <div class="p-5 flex-grow">

              <!-- User -->
              <div class="flex justify-between items-start gap-4 mb-6">
                <div>
                  <p class="text-sm font-black text-gray-900">
                    {{ order.user?.name }}
                  </p>
                  <p class="text-[11px] text-gray-500">
                    {{ order.user?.email }}
                  </p>
                </div>
                <div class="text-right">
                  <p class="text-[10px] text-gray-400 uppercase">
                    Total
                  </p>
                  <p class="text-xl font-black text-[#8B0000]">
                    ₹{{ order.total_amount }}
                  </p>
                </div>
              </div>

              <!-- Items -->
              <div class="mb-6 border rounded-xl overflow-hidden">
                <table class="w-full text-[11px]">
                  <thead class="bg-gray-50 text-gray-400 uppercase">
                    <tr>
                      <th class="px-3 py-2">Item</th>
                      <th class="px-3 py-2 text-center">Qty</th>
                      <th class="px-3 py-2 text-right">Price</th>
                      <th class="px-3 py-2 text-right">Subtotal</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of order.items">
                      <td class="px-3 py-2 font-bold">
                        {{ item.product?.name || 'Deleted Product' }}
                      </td>
                      <td class="px-3 py-2 text-center">
                        {{ item.quantity }}
                      </td>
                      <td class="px-3 py-2 text-right">
                        ₹{{ item.price }}
                      </td>
                      <td class="px-3 py-2 text-right">
                        ₹{{ item.price * item.quantity }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Address -->
              <div class="bg-red-50/30 p-3 rounded-xl mb-6">
                <p class="text-[9px] uppercase text-[#8B0000] mb-1">
                  Destination
                </p>
                <p class="text-xs italic">
                  {{ order.address }},
                  {{ order.city }},
                  {{ order.state }} -
                  {{ order.pincode }}
                </p>
              </div>

              <!-- Controls -->
              <div class="pt-4 border-t flex gap-3">
                <select
                  [(ngModel)]="tempStatus[order.id]"
                  class="w-full border rounded-lg px-3 py-2 text-xs font-bold"
                >
                  <option *ngFor="let s of statuses" [value]="s">
                    {{ s }}
                  </option>
                </select>

                <button
                  (click)="updateStatus(order.id)"
                  class="bg-[#8B0000] text-white px-6 py-2 rounded-lg text-xs font-black uppercase"
                >
                  Update
                </button>
              </div>

            </div>
          </div>

        </ng-container>
      </ng-container>

      <!-- Empty -->
      <ng-template #noOrders>
        <div class="lg:col-span-2 py-32 text-center bg-white border border-dashed rounded-3xl">
          <p class="text-[#8B0000] text-xl font-black uppercase italic">
            All Cleared
          </p>
          <p class="text-xs text-gray-400 uppercase mt-2">
            No active orders below shipped
          </p>
        </div>
      </ng-template>

    </div>
  </div>
</div>



